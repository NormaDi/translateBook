# 4.12.1 Фальшивый коробчатый робот.

Для запуска симулятора ArbotiX с помощью одноручного бокс-робота используйте файл запуска _fake\_box\_robot\_with\_gripper.launch в rbx2\_bringup/launch_:

![](../.gitbook/assets/image%20%2896%29.jpeg)

Вывод на экран должен выглядеть примерно так:

![](../.gitbook/assets/image%20%2877%29.png)

Здесь мы видим, что запустили три узла: основной драйвер arbotix, драйвер для правого захвата и _robot\_state\_publisher_. Также мы видим линии INFO для двух совместных контроллеров траекторий \(называемых FollowControllers в пакете arbotix\), один для правого плеча и один для захвата\) и DiffController для базы привода дифференциала. Мы отложим обсуждение этих узлов и контроллеров до главы о MoveIt! и Arm Navigation. А пока давайте просто проверим, что мы можем двигать шарниры соответствующим образом.

Если RViz все еще запущен из предыдущего сеанса, завершите его сейчас и приведите его в конфигурационном файле _sim.rviz_ следующим образом:

![](../.gitbook/assets/image%20%289%29.png)

Обратите внимание, что в категории "**Global Options**" мы установили значение параметра Fixed Frame в _/odom_. Вспомните из тома 1, что нам нужно быть в кадре _/odom_, чтобы видеть движение робота при публикации команд Twist в теме _/cmd\_vel_.

Теперь откройте новый терминал и откройте утилиту с графическим интерфейсом ArbotiX:

![](../.gitbook/assets/image%20%2850%29.jpeg)

A new window should pop up that looks like this:

![page171image28080352](blob:https://app.gitbook.com/33460d1a-3224-4c7a-837b-56e444da5523)

Используйте смоделированную дорожку слева, чтобы управлять роботом в RViz, захватив маленькую красную точку и перетаскивая ее вокруг. \(Если робот не появляется на экране, дважды проверьте, что Вы установили Фиксированный кадр в _/odom_ в категории Глобальные опции в RViz\). Чтобы переместить шарнир, установите флажок рядом с именем сервопривода, а затем используйте ползунок для его вращения.

_Arbotix\_gui_ - это хороший способ проверить основные функциональные возможности вашего робота. Перемещение красной точки на трековой панели публикует сообщения Twist на тему _/cmd\_vel_. Если параметры базового контроллера настроены правильно, то фальшивый робот должен двигаться ожидаемым образом.

Аналогичным образом, ползунок управления сервопривода может быть использован для проверки движения отдельных суставов. Эти элементы управления публикуют сообщение Float64, представляющее совместную позицию в радианах по теме / _joint\_name/command_. Например, ползунок с меткой _right\_arm\_shoulder\_lift_ публикует свое значение позиции на тема _/right\_arm\_shoulder\_lift\_joint/command_. При движении ползунка рука должна двигаться вверх или вниз у плечевого сустава.

Одиночные узлы _arbotix_ являются настоящими контроллерами, в отличие от совместного государственного издателя, который мы использовали в этой главе до сих пор, мы можем публиковать команды на соответствующие темы контроля для перемещения узлов. В первом томе мы уже видели, как перемещать базу фальшивого робота, публикуя команды Twist в теме _/cmd\_vel._ Теперь мы также можем перемещать суставы аналогичным образом.

Прекратите работу _arbotix\_gui_, если он все еще работает, а затем попробуйте следующие команды для перемещения головы и руки.

Например, чтобы повернуть голову на _90_ градусов \(_1.57 радиана_\) влево, выполните команду:

![](../.gitbook/assets/image%20%2898%29.png)

Чтобы переместить руку в горизонтальное положение с помощью _the right\_arm\_shoulder\_lift\_joint_, попробуйте команду:

![](../.gitbook/assets/image%20%2846%29.jpeg)

И переместить его обратно в положение покоя:

![](../.gitbook/assets/image%20%2840%29.jpeg)

В последующих главах мы узнаем, как программно управлять суставами из наших собственных узлов.



